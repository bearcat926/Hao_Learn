1-2

- 【3小时】南京大学项目专利报账第二阶段功能 - 分析专利报账第二阶段功能的开发流程及需要时间
- 【5小时】南京大学项目专利报账第二阶段功能 - 解决专利报账功能开发后数据库数据问题导致的场景错误

1-3

- 【3小时】南京大学项目专利报账第二阶段功能 - 开始开发级联展示费用科目功能
- 【5小时】南京大学项目专利报账第二阶段功能 - 完成级联展示费用科目的开发


遇到的问题并解决：


总结：

    适逢元旦，本周工作量不算大，主要是数据处理的问题比较多，比较繁琐需要耐心


bug：

1. 场景子表缺少主键导致可插入多条 -> 查看场景时会出现错误


===============================

1-6

- 【3小时】南京大学项目专利报账第二阶段功能 - 专利费用科目模块（创建了临时专利类型数据字典，不使用原本的专利类型字典）及审核通过后生成凭单号的功能
- 【6小时】南京大学项目专利报账第二阶段功能 - 开发流水号模块用于流水号报账中凭单号的生成；手动填写申请号时需进行规则校验

1-7

- 【2小时】南京大学项目专利报账第二阶段功能 - 阅读打印案例的代码
- 【6.5小时】南京大学项目专利报账第二阶段功能 - 开发专利报账的打印建账单功能

导出SQL
-- 1.模块管理：专利报账，专利报账费用
-- 2.模块分类：专利报账，专利报账费用
-- 3.菜单配置：专利报账列表    
-- 4.元数据：专利报账，专利报账费用
-- 5.数据字典：专利费用类型
-- 6.角色菜单分配
-- 7.场景：提案查找；专利报账，专利报账费用

经费卡号从经费卡表中带出，经费卡负责人必须是申请人本人

经费卡号带出规则，所有经费卡号都可以选择，暂不限制
经费卡号余额不能大于报账总额（财务对接后体现该限制）

1-8

- 【3小时】南京大学项目专利提案模块 - 梳理打印申请表的业务
- 【5小时】南京大学项目专利提案模块 - 开发并测试打印申请表

1-9

- 【3小时】修改专利报账的代理公司部分，添加报账单字体设置；提交功能更新SQL文件
- 【5小时】
    1. 重名人员没有标记 -> 配置字典，修改Patent类的AllAuthor字段的查询SQL
    2. 认领后成员丢失 -> 维护关联关系的代码被注释，取消注释后恢复正常
    3. 不应存在校内老师单位信息不存在的记录 -> 原本认领部分的代码逻辑有误，修改成从对接后的数据库中拿取作者信息
    4. 费用科目列表的排序问题 -> 添加ORDERID字段（int）用于排序 -> 修改实体类 -> 添加元数据 -> 修改相关场景 

1-10

- 【3小时】软件著作权建账模块 - 著作权建账模块数据库设计和业务
- 【5小时】软件著作权建账模块 - 著作权建账模块接口和页面开发；解决专利报账不在菜单中显示的问题

===============================

1-14

- 【3小时】软件著作权建账模块 - 著作权建账模块根据需求修改数据库字段，根据著作权模块带出著作信息
- 【5小时】软件著作权建账模块 - 打印建账单功能

1-15

- 【5小时】软件著作权建账模块 - 确定不明确的业务需求并修改代码

问题：
    关于申请人，申请时间和完成人字段：
    1. 申请人字段是著作权人 
    2. 申请日期？  著作权加字段
    3. 完成人需要字段 打印时不要区分 显示完成人  
    4. 证书获得日期是出版日期吗？ 是
    5. 经办人是否是当前用户？ 是
    6. 申请单位(签章)的电子是什么意思？当前处理方式是留空，这样合理吗？ 留空
    7. 总金额需要js自动计算吗？需要

导出SQL：

0. 表（本地库复制时丢失主键需要补充）：SERIAL_NUMBER（模块流水号），BIZ_COPY_RIGHT（新加了两个字段）,BIZ_COPY_RIGHT_ACCOUNT
1. 模块配置：著作权（新加了两个字段），著作权建账
2. 模块分类: 著作权建账（根据正式库分类sql确定目录顺序）
3. 字典：PRODUCT_TYPE
6. 角色管理：科研人员，秘书，管理员


问题：
    专利提案在审核通过之后是有流水号的，但是这流水号当前是四位的，而申请单上的例子是六位的，需不需要改成六位

1-16

- 【3小时】导出软著建账的相关SQL（过程中出现表丢失主键问题，已解决）及专利相关优化的SQL
- 【5小时】与张森确认上线功能，出现SQL版本不同导致的场景错误问题，梳理并修改SQL后解决

1-17

- 【3小时】
- 【5小时】

任务：

1、根据历史数据初始化专利库数据的所属单位

2、根据历史数据明确专利的第一发明人信息的职工号，绑定具体的人员。

3、导入历史专利报账数据

4、导入历史专利申请数据

历史表问题：
1. 申请号中, . / 空格 - 删除；还有首位PCT、ZL、CN、EP、US、JP、Au、中文的情况
2. 有两条数据的所属单位为系统管理员
3. 历史表，表名中有'-'的表作用不明确
4. 没有申请号的数据(640条)

当前专利库问题：
1. 第一发明人为教师但是并未更新署名的专利字段 -> 当前专利作者表中的原始数据所属单位ID错误，原因是BIZ_UNIT表修改过部分所属单位的ID
2. 名称重复的专利(当前专利库) 752条

bug：定时任务更新发明人时，重名人员的署名顺序都为1

完成效果：
1. 把历史数据转移到新表，确保数据不丢失
2. 确保作者数据可被管理角色（个人、秘书、管理员）查询，通知 -> 保证人员与作者关联
3. 无法确认关联关系的数据需要进行记录


需要使用代码完善的部分：
FIRST_AUTHOR_ID, FIRST_AUTHOR_NAME, FIRST_AUTHOR_ACCOUNT
专利提案：INVENTOR_ID, INVENTOR , ACCEPTED_STATE（有申请号，则yes）, AGENT_TYPE(ACGENCY_NAME);作者
专利报账费用

1-19

- 【3小时】分析历史库数据，编写相关SQL
- 【5小时】分析历史库数据，编写相关SQL

1-20

- 【5小时】分析历史库数据，编写相关SQL

1-21

- 【3小时】开始任务 - 导入历史专利报账数据
- 【5小时】完成任务 - 导入历史专利报账数据; 开始任务 - 导入历史专利申请数据

1-22

- 【3小时】完成任务 - 导入历史专利申请数据
- 【5小时】完成任务 - 根据历史数据明确专利的第一发明人信息的职工号，绑定具体的人员。

1-23

- 【3小时】完成任务 - 根据历史数据初始化专利库数据的所属单位
- 【5小时】整理SQL文件