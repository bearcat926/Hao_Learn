# 启动redis
cd redis1
./src/redis-server redis.conf
cd ..
cd redis2
./src/redis-server redis.conf
cd ..
cd redis3
./src/redis-server redis.conf
cd ..
cd redis4
./src/redis-server redis.conf
cd ..
cd redis5
./src/redis-server redis.conf
cd ..
cd redis6
./src/redis-server redis.conf
cd ..

# 创建redis集群
./redis1/src/redis-cli --cluster create 39.96.30.7:6401 39.96.30.7:6402 39.96.30.7:6403 39.96.30.7:6404 39.96.30.7:6405 39.96.30.7:6406 --cluster-replicas 1

# 关闭redis
./redis1/src/redis-cli -h 172.16.42.3 -p 6401 shutdown
./redis2/src/redis-cli -h 172.16.42.3 -p 6402 shutdown
./redis3/src/redis-cli -h 172.16.42.3 -p 6403 shutdown
./redis4/src/redis-cli -h 172.16.42.3 -p 6404 shutdown
./redis5/src/redis-cli -h 172.16.42.3 -p 6405 shutdown
./redis6/src/redis-cli -h 172.16.42.3 -p 6406 shutdown

# 删除相关缓存文件
rm -f redis*/nodes.conf
rm -f redis*/dump.rdb
rm -f redis*/appendonly.aof

# 访问redis集群节点
./redis1/src/redis-cli -c -h 39.96.30.7 -p 6401
./redis1/src/redis-cli -c -h 172.16.42.3 -p 6401

cluster nodes
cluster info

