# 2019.8.19

## 解决yum安装下载慢的问题

```shell

# 清楚缓存并更新，再重复安装命令即可
yum clean all
yum makecache
yum update

-----------

# 备份
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
# 下载新的CentOS-Base.repo 到/etc/yum.repos.d/
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

# 之后运行生成缓存并更新

```

## Linux ln命令：创建文件链接

ln 是一个很神奇的命令，它可以创建一个文件的影子，也可以通过一个通道进入另一个地方。其实，所有的这些把戏都是通过软链接和硬链接来实现的。

软链接，全称是软链接文件，英文叫作 symbolic link。这类文件其实非常类似于 Windows 里的快捷方式，这个软链接文件（假设叫 VA）的内容，其实是另外一个文件（假设叫 B）的路径和名称，当打开 A 文件时，实际上系统会根据其内容找到并打开 B 文件。

而硬链接，全称叫作硬链接文件，英文名称是 hard link。这类文件比较特殊，这类文件（假设叫 A）会拥有自己的 inode 节点和名称，其 inode 会指向文件内容所在的数据块。与此同时，该文件内容所在的数据块的引用计数会加 1。当此数据块的引用计数大于等于 2 时，则表示有多个文件同时指向了这一数据块。一个文件修改，多个文件都会生效。当删除其中某个文件时，对另一个文件不会有影响，仅仅是数据块的引用计数减 1。当引用计数为 0 时，则系统才会清除此数据块。

```shell

# 建立硬链接的命令格式
ln 源文件名称 硬链接文件名称

#我们通过ls -i查看两个文件的inode, 发现是完全相同的, 表示它们指向的是同一数据块

# 建立软链接的命令格式，-s 即 --symbolic 选项。
ln -s 源文件名称 软链接文件名称

#使ls-il 命令查看，发现inode是不一样的，这明它们完全指向两个不同的数据块。而且，软链接文件的权限栏首字符为l，这也是软链接文件区别于普通文件的地方之一。
```

为什么 ln 不允许硬链接到目录？
Linux 系统中的硬链接有两个限制：
1. 不能跨越文件系统。
2. 不允许普通用户对目录作硬链接。

如果引入了对目录的硬连接就有可能在目录中引入循环链接，那么在目录遍历的时候系统就会陷入无限循环当中。